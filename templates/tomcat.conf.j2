{{ ansible_managed }}

description "Tomcat Server"

  start on runlevel [2345]
  stop on runlevel [!2345]
  respawn
  respawn limit 10 5

  setuid tomcat
  setgid tomcat

  env JAVA_HOME={{ java_home }}
  env CATALINA_HOME={{ catalina_home }}

  # Modify these options as needed
  env JAVA_OPTS="{{ tomcat_ubuntu_java_opts }}" 
  env CATALINA_OPTS="{{ tomcat_ubuntu_catalina_opts }}"

  exec $CATALINA_HOME/bin/catalina.sh run

  # cleanup temp directory after stop
  post-stop script
    rm -rf $CATALINA_HOME/temp/*
  end script